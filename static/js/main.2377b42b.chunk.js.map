{"version":3,"sources":["components/word.jsx","components/topbar.jsx","App.js","serviceWorker.js","index.js"],"names":["useStyles","makeStyles","theme","root","typography","h6","margin","padding","boxSizing","border","borderRadius","shape","userSelect","clicked","color","palette","primary","main","deleted","textDecoration","synced","backgroundColor","secondary","borderColor","Word","value","st","et","playPoint","onClick","include","onKeyDown","contentType","onMouseDown","onMouseUp","onMouseEnter","wordData","selectedWord","classes","className","includes","tabIndex","flexGrow","menuButton","marginRight","spacing","title","display","breakpoints","up","search","position","fade","common","white","marginLeft","width","searchIcon","height","pointerEvents","alignItems","justifyContent","inputRoot","inputInput","paddingLeft","transition","transitions","create","buttonBox","flexDirection","exportButton","IconButton","TopBar","clickUndo","clickDelete","AppBar","Toolbar","variant","Typography","noWrap","Box","Button","disabled","length","App","player","useRef","useState","setPlayPoint","data","setData","playing","timeBlock","setTimeBlock","index","setIndex","previewMode","setPreviewMode","mouseIsDown","setMouseIsDown","setSelectedWord","url","useEffect","fetch","then","response","json","results","items","map","word","handleSetTimeBlock","includeWord","filter","w","type","forEach","i","parseInt","timeBlockLocal","block","start_time","push","end_time","console","log","handleMouseUp","current","seekTo","handleClick","deleteWord","dataClone","indexOf","playPreview","CssBaseline","Container","maxwidth","mt","overflow","Grid","container","direction","item","md","xs","ref","controls","progressInterval","onProgress","progress","playedSeconds","Switch","onChange","checked","flexWrap","key","alternatives","content","e","keyCode","handleKeyDown","selectedWordCopy","splice","handleMouseDown","handleMouseEnter","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.2377b42b.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    ...theme.typography.h6,\r\n    margin: \"4px 0px\",\r\n    padding: \"2px 3px\",\r\n    boxSizing: \"border-box\",\r\n    border: \"1px solid none\",\r\n    borderRadius: theme.shape.borderRadius,\r\n    userSelect: \"none\",\r\n  },\r\n  clicked: {\r\n    // backgroundColor: theme.palette.primary.main,\r\n    color: theme.palette.primary.main,\r\n  },\r\n  deleted: {\r\n    // backgroundColor: \"white\",\r\n    color: \"lightgrey\",\r\n    textDecoration: \"line-through\",\r\n  },\r\n  synced: {\r\n    backgroundColor: theme.palette.secondary.main,\r\n    color: \"white\",\r\n    borderColor: \"red\",\r\n  },\r\n}));\r\n\r\nfunction Word({\r\n  value,\r\n  st,\r\n  et,\r\n  playPoint,\r\n  onClick,\r\n  include,\r\n  onKeyDown,\r\n  contentType,\r\n  onMouseDown,\r\n  onMouseUp,\r\n  onMouseEnter,\r\n  wordData,\r\n  selectedWord,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  let className = classes.root;\r\n  if (selectedWord.includes(wordData)) {\r\n    className = `${classes.root} ${classes.clicked}`;\r\n  } else if (include === false) {\r\n    className = `${classes.root} ${classes.deleted}`;\r\n  } else if (playPoint >= st && playPoint < et) {\r\n    // TODO: add a delay if clicked\r\n    className = `${classes.root} ${classes.synced}`;\r\n  }\r\n\r\n  const isPunct = contentType === \"punctuation\" ? true : false;\r\n\r\n  if (!isPunct) {\r\n    return (\r\n      <>\r\n        <div\r\n          className={className}\r\n          onClick={onClick}\r\n          onKeyDown={onKeyDown}\r\n          tabIndex={0}\r\n          // type=\"button\"\r\n          onMouseDown={onMouseDown}\r\n          onMouseUp={onMouseUp}\r\n          onMouseEnter={onMouseEnter}\r\n        >\r\n          {value}\r\n        </div>\r\n      </>\r\n    );\r\n  } else {\r\n    return (\r\n      <div className=\"d-flex flex-column justify-content-center\">\r\n        <span>{value}</span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Word;\r\n","import React from \"react\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { fade, makeStyles } from \"@material-ui/core/styles\";\r\nimport { Button, Box } from \"@material-ui/core\";\r\nimport UndoIcon from \"@material-ui/icons/Undo\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n    display: \"none\",\r\n    [theme.breakpoints.up(\"xs\")]: {\r\n      display: \"block\",\r\n    },\r\n  },\r\n  search: {\r\n    position: \"relative\",\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.15),\r\n    \"&:hover\": {\r\n      backgroundColor: fade(theme.palette.common.white, 0.25),\r\n    },\r\n    marginLeft: 0,\r\n    width: \"100%\",\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      marginLeft: theme.spacing(1),\r\n      width: \"auto\",\r\n    },\r\n  },\r\n  searchIcon: {\r\n    padding: theme.spacing(0, 2),\r\n    height: \"100%\",\r\n    position: \"absolute\",\r\n    pointerEvents: \"none\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  inputRoot: {\r\n    color: \"inherit\",\r\n  },\r\n  inputInput: {\r\n    padding: theme.spacing(1, 1, 1, 0),\r\n    // vertical padding + font size from searchIcon\r\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n    transition: theme.transitions.create(\"width\"),\r\n    width: \"100%\",\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: \"12ch\",\r\n      \"&:focus\": {\r\n        width: \"20ch\",\r\n      },\r\n    },\r\n  },\r\n  buttonBox: {\r\n    flexGrow: 1,\r\n    display: \"flex\",\r\n    flexDirection: \"row-reverse\",\r\n  },\r\n  exportButton: {\r\n    marginRight: theme.spacing(2),\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n  IconButton: {},\r\n}));\r\n\r\nexport default function TopBar({ clickUndo, clickDelete, selectedWord }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar variant=\"dense\">\r\n          <Typography className={classes.title} variant=\"h6\" noWrap>\r\n            Captain JumpCut\r\n          </Typography>\r\n          <Box className={classes.buttonBox}>\r\n            <Button\r\n              className={classes.exportButton}\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n            >\r\n              Export\r\n            </Button>\r\n            <IconButton\r\n              className={classes.IconButton}\r\n              onClick={clickDelete}\r\n              color=\"default\"\r\n              disabled={\r\n                selectedWord.length === 0 || selectedWord[0].include === false\r\n                  ? true\r\n                  : false\r\n              }\r\n            >\r\n              <DeleteIcon />\r\n            </IconButton>\r\n            <IconButton\r\n              className={classes.IconButton}\r\n              onClick={clickUndo}\r\n              disabled={\r\n                selectedWord.length === 0 || selectedWord[0].include === true\r\n                  ? true\r\n                  : false\r\n              }\r\n            >\r\n              <UndoIcon />\r\n            </IconButton>\r\n          </Box>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport Word from \"./components/word\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { Grid, Box, CssBaseline, Typography } from \"@material-ui/core\";\r\nimport { Container } from \"@material-ui/core\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { Switch } from \"@material-ui/core\";\r\nimport TopBar from \"./components/topbar\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nfunction App() {\r\n  const player = useRef(null);\r\n  const [playPoint, setPlayPoint] = useState(0);\r\n  const [data, setData] = useState([]);\r\n  const [playing, setPlaying] = useState(false);\r\n  const [timeBlock, setTimeBlock] = useState([]);\r\n  const [index, setIndex] = useState(0);\r\n  const [previewMode, setPreviewMode] = useState(true);\r\n  const [mouseIsDown, setMouseIsDown] = useState(false);\r\n  const [selectedWord, setSelectedWord] = useState([]);\r\n  const [url, setUrl] = useState(\r\n    \"https://inputvid.s3.us-east-2.amazonaws.com/1mintedtalk.mp4\"\r\n  );\r\n\r\n  // fetch json file\r\n  useEffect(() => {\r\n    // put the json file to data state\r\n    fetch(\r\n      \"https://transcriptionfornick.s3.us-east-2.amazonaws.com/asrOutput.json\"\r\n    )\r\n      .then((response) => response.json())\r\n      .then((json) =>\r\n        setData(\r\n          json.results.items.map((word) => {\r\n            word.include = true;\r\n            // tweak this value to get rid of the sound of a removed word\r\n            // word.end_time = parseFloat(word.end_time) - 0.2;\r\n            return word;\r\n          })\r\n        )\r\n      );\r\n  }, []);\r\n\r\n  const handleSetTimeBlock = () => {\r\n    let includeWord = data.filter((w) => w.type !== \"punctuation\");\r\n    includeWord.forEach((w, i) => (w.index = parseInt(i)));\r\n    includeWord = includeWord.filter((w) => w.include === true);\r\n\r\n    let timeBlockLocal = [];\r\n    let block = [includeWord[0].start_time];\r\n    try {\r\n      for (let i = 0; i < includeWord.length - 1; i++) {\r\n        if (includeWord[i].index + 1 !== includeWord[i + 1].index) {\r\n          block.push(includeWord[i].end_time);\r\n          timeBlockLocal.push(block);\r\n          block = [includeWord[i + 1].start_time];\r\n        } else if (includeWord[i].index + 1 === includeWord[i + 1].index) {\r\n          continue;\r\n        }\r\n      }\r\n    } finally {\r\n      block.push(includeWord[includeWord.length - 1].end_time);\r\n      timeBlockLocal.push(block);\r\n    }\r\n    setTimeBlock(timeBlockLocal);\r\n    console.log(\"timeBlockLocal set\");\r\n  };\r\n\r\n  const handleProgress = (progress) => {\r\n    // console.log(progress.playedSeconds);\r\n    setPlayPoint(progress.playedSeconds);\r\n  };\r\n\r\n  const handleClick = (w) => {\r\n    player.current.seekTo(w.start_time);\r\n    setPlayPoint(w.start_time);\r\n  };\r\n\r\n  const handleMouseDown = (e, w) => {\r\n    setMouseIsDown(true);\r\n    // add the clicked word to array, and check if word is in, if is then remove it.\r\n    let selectedWordCopy = [...selectedWord];\r\n    if (selectedWord.length !== 0) {\r\n      setSelectedWord([]);\r\n    } else if (!selectedWord.includes(w)) {\r\n      selectedWordCopy.push(w);\r\n      setSelectedWord(selectedWordCopy);\r\n    } else {\r\n      selectedWordCopy.splice(selectedWordCopy.indexOf(w), 1);\r\n      setSelectedWord(selectedWordCopy);\r\n    }\r\n  };\r\n\r\n  const handleMouseUp = (w) => {\r\n    setMouseIsDown(false);\r\n    handleClick(w);\r\n  };\r\n\r\n  const handleMouseEnter = (e, w) => {\r\n    if (mouseIsDown) {\r\n      let selectedWordCopy = [...selectedWord];\r\n      if (selectedWord.includes(w)) {\r\n        return;\r\n      } else {\r\n        selectedWordCopy.push(w);\r\n        setSelectedWord(selectedWordCopy);\r\n        console.log(selectedWord);\r\n      }\r\n    }\r\n  };\r\n\r\n  // change include to false when Del is pressed\r\n  const handleKeyDown = (e, w) => {\r\n    if (e.keyCode === 8) {\r\n      deleteWord();\r\n    }\r\n  };\r\n\r\n  const deleteWord = () => {\r\n    let dataClone = [...data];\r\n    for (let i = 0; i < selectedWord.length; i++) {\r\n      let index = data.indexOf(selectedWord[i]);\r\n      dataClone[index].include = false;\r\n      setData(dataClone);\r\n      setSelectedWord([]);\r\n    }\r\n    handleSetTimeBlock();\r\n  };\r\n\r\n  const handleClickUndo = () => {\r\n    console.log(\"clickedUndo\");\r\n    let dataClone = [...data];\r\n    for (let i = 0; i < selectedWord.length; i++) {\r\n      let index = data.indexOf(selectedWord[i]);\r\n      dataClone[index].include = true;\r\n      setData(dataClone);\r\n      setSelectedWord([]);\r\n    }\r\n    handleSetTimeBlock();\r\n  };\r\n\r\n  const handlePreviewClicked = () => {\r\n    if (!previewMode) {\r\n      setPreviewMode(true);\r\n      playPreview();\r\n    } else {\r\n      setPreviewMode(false);\r\n    }\r\n  };\r\n\r\n  //watch playPoint and timeBlock match\r\n  useEffect(() => {\r\n    if (previewMode) {\r\n      playPreview();\r\n    }\r\n  }, [playPoint]);\r\n\r\n  const playPreview = () => {\r\n    if (timeBlock.length > 0) {\r\n      // console.log(\"playPreview\", timeBlock);\r\n      for (let i = 1; i < timeBlock.length; i++) {\r\n        if (playPoint >= timeBlock[i - 1][0] && playPoint < timeBlock[i][0]) {\r\n          setIndex(i - 1);\r\n          // console.log(\"index is \", i, index);\r\n          if (\r\n            // this block check if playPoint is in the exclude zone.\r\n            playPoint > timeBlock[index][1] - 0.1 && // the 0.1 is the tolerance of the word, change it to have more or less of the word\r\n            playPoint < timeBlock[index + 1][0] // index 0 is start_time\r\n          ) {\r\n            // console.log(\"playpoint matched\");\r\n            player.current.seekTo(timeBlock[index + 1][0]);\r\n          }\r\n        } else continue;\r\n      }\r\n    }\r\n  };\r\n\r\n  //  click on white space to cancel word selection\r\n  // useEffect(() => {\r\n  //   if (selectedWord.length !== 0 && mouseIsDown !== true) {\r\n  //     document.addEventListener(\"mousedown\", removeSelectedWord);\r\n  //     document.addEventListener(\"mousedown\", (e) => console.log(e.target));\r\n  //   }\r\n  // }, [mouseIsDown]);\r\n\r\n  // const removeSelectedWord = () => {\r\n  //   console.log(\"removeSelected word\");\r\n  //   setSelectedWord([]);\r\n  // };\r\n\r\n  return (\r\n    <>\r\n      <CssBaseline />\r\n      <TopBar\r\n        clickDelete={deleteWord}\r\n        clickUndo={handleClickUndo}\r\n        selectedWord={selectedWord}\r\n      />\r\n      <Container maxwidth=\"lg\">\r\n        <Box mt={4} overflow=\"hidden\" height=\"85vh\">\r\n          <Grid container direction=\"row\" spacing={4}>\r\n            <Grid item md={6} xs={12}>\r\n              <Box>\r\n                <ReactPlayer\r\n                  // className=\"d-flex flex-column justify-content-start\"\r\n                  ref={player}\r\n                  url={url}\r\n                  controls={true}\r\n                  progressInterval={10}\r\n                  onProgress={handleProgress}\r\n                  playing={playing}\r\n                  height=\"100%\"\r\n                  width=\"100%\"\r\n                />\r\n              </Box>\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Switch\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onChange={handlePreviewClicked}\r\n                  checked={previewMode ? true : false}\r\n                ></Switch>\r\n                <Typography variant=\"body1\">Preview Edits</Typography>\r\n                {/* <Button variant=\"contained\" color=\"primary\">\r\n              Render and Export\r\n            </Button> */}\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Grid container direction=\"row\">\r\n                {/* <Paper p={4} variant=\"outlined\"> */}\r\n                <Box\r\n                  mt={-1}\r\n                  display=\"flex\"\r\n                  flexWrap=\"wrap\"\r\n                  overflow=\"auto\"\r\n                  direction=\"row\"\r\n                  height=\"80vh\"\r\n                >\r\n                  {data.map((w) => (\r\n                    <Word\r\n                      key={\r\n                        w.alternatives[0].content +\r\n                        w.start_time +\r\n                        data.indexOf(w)\r\n                      }\r\n                      value={w.alternatives[0].content}\r\n                      st={w.start_time}\r\n                      et={w.end_time}\r\n                      contentType={w.type}\r\n                      include={w.include}\r\n                      playPoint={playPoint}\r\n                      // onClick={() => handleClick(w)}\r\n                      onKeyDown={(e) => handleKeyDown(e, w)}\r\n                      onMouseUp={() => handleMouseUp(w)}\r\n                      onMouseDown={(e) => handleMouseDown(e, w)}\r\n                      onMouseEnter={(e) => handleMouseEnter(e, w)}\r\n                      wordData={w}\r\n                      selectedWord={selectedWord}\r\n                    />\r\n                  ))}\r\n                </Box>\r\n                {/* </Paper> */}\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}